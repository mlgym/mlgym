{
    "data": "global_config:\n  storage_connector_path: &storage_path_anchor ./file_storage/\n  seed: &seed_value 2\n  target_key: &target_key_anchor target_key\n  model_prediction_key: &model_prediction_key_anchor model_prediction_key\n  postprocessing_argmax_key: &postprocessing_argmax_key_anchor postprocessing_argmax_key\n\nmodel_info:  \n  model_description: \"Testing 1 2 3 Hopefully it works.\"\n  model_version: 1.0.0\n  source_repo: \"Github repo link Ex: https://github.com/mlgym/mlgym/tree/dev\"\n\ndataset_repository:\n  component_type_key: DATASET_REPOSITORY\n  variant_key: DEFAULT\n  config:\n    storage_connector_path: *storage_path_anchor\n\ndataset_iterators:\n  component_type_key: DATASET_ITERATORS\n  variant_key: DEFAULT\n  requirements:\n    - name: repository\n      component_name: dataset_repository\n  config:\n    dataset_identifier: mnist\n    split_configs:\n      - split: train\n      - split: test\n\nsplitted_dataset_iterators:\n  component_type_key: SPLITTED_DATASET_ITERATORS\n  variant_key: RANDOM\n  requirements:\n    - name: iterators\n      component_name: dataset_iterators\n      subscription:\n        - train\n        - test\n  config:\n    split_configs:\n      train:\n        train: 0.7\n        val: 0.3\n    seed: 2\n\ndata_collator:\n  component_type_key: DATA_COLLATOR\n  variant_key: DEFAULT\n  config:\n    collator_type:\n      injectable:\n        id: id_conv_mnist_standard_collator\n    collator_params:\n      target_publication_key: *target_key_anchor\n\ndata_loaders:\n  component_type_key: DATA_LOADER\n  variant_key: DEFAULT\n  requirements:\n    - name: iterators\n      component_name: splitted_dataset_iterators\n      subscription: [train, val, test]\n    - name: data_collator\n      component_name: data_collator\n  config:\n    batch_size:\n      sweep: absolute\n      values: [10, 50, 100]\n    weigthed_sampling_split_name: train\n    seeds: [0, 1, 2]\n\nmodel_registry:\n  component_type_key: MODEL_REGISTRY\n  variant_key: DEFAULT\n\nmodel:\n  component_type_key: MODEL\n  variant_key: DEFAULT\n  requirements:\n    - name: model_registry\n      component_name: model_registry\n      subscription: conv_net\n  config:\n    model_definition:\n      layer_config:\n        - params:\n            in_channels: 1\n            kernel_size: 3\n            out_channels: 32\n            stride: 1\n          type: conv\n        - params:\n            in_channels: 32\n            kernel_size: 3\n            out_channels: 64\n            stride: 1\n          type: conv\n        - params:\n            in_features: 9216\n            out_features: 128\n          type: fc\n        - params:\n            in_features: 128\n            out_features: 10\n          type: fc\n    prediction_publication_keys:\n      prediction_publication_key: *model_prediction_key_anchor\n    seed: *seed_value\n\noptimizer:\n  component_type_key: OPTIMIZER\n  variant_key: DEFAULT\n  config:\n    optimizer_key: ADAM\n    params:\n      lr:\n        sweep: absolute\n        values: [1, 0.1, 0.01, 0.001, 0.0001]\n\nlr_scheduler:\n  component_type_key: LR_SCHEDULER\n  variant_key: DEFAULT\n  config:\n    lr_scheduler_key: dummy\n\nloss_function_registry:\n  component_type_key: LOSS_FUNCTION_REGISTRY\n  variant_key: DEFAULT\n\nmetric_registry:\n  component_type_key: METRIC_REGISTRY\n  variant_key: DEFAULT\n\nprediction_postprocessing_registry:\n  component_type_key: PREDICTION_POSTPROCESSING_REGISTRY\n  variant_key: DEFAULT\n\ntrain_component:\n  component_type_key: TRAIN_COMPONENT\n  variant_key: DEFAULT\n  requirements:\n    - name: loss_function_registry\n      component_name: loss_function_registry\n    - name: prediction_postprocessing_registry\n      component_name: prediction_postprocessing_registry\n  config:\n    show_progress: true\n    loss_fun_config:\n      prediction_subscription_key: *model_prediction_key_anchor\n      target_subscription_key: *target_key_anchor\n      key: CrossEntropyLoss\n      tag: cross_entropy_loss\n\ntrainer:\n  component_type_key: TRAINER\n  variant_key: DEFAULT\n  requirements:\n    - name: train_component\n      component_name: train_component\n    - name: model\n      component_name: model\n      subscription: null\n    - name: data_loaders\n      component_name: data_loaders\n      subscription: train\n\neval_component:\n  component_type_key: EVAL_COMPONENT\n  variant_key: DEFAULT\n  requirements:\n    - name: model\n      component_name: model\n      subscription: null\n    - name: data_loaders\n      component_name: data_loaders\n      subscription: [train, val, test]\n    - name: loss_function_registry\n      component_name: loss_function_registry\n    - name: metric_registry\n      component_name: metric_registry\n    - name: prediction_postprocessing_registry\n      component_name: prediction_postprocessing_registry\n  config:\n    cpu_target_subscription_keys:\n      - *target_key_anchor\n    cpu_prediction_subscription_keys:\n      - *postprocessing_argmax_key_anchor\n      - *model_prediction_key_anchor\n    post_processors_config:\n      - key: \"ARG_MAX\"\n        prediction_subscription_key: *model_prediction_key_anchor\n        prediction_publication_key: *postprocessing_argmax_key_anchor\n    metrics_config:\n      - key: F1_SCORE\n        params:\n          average: macro\n        prediction_subscription_key: *postprocessing_argmax_key_anchor\n        target_subscription_key: *target_key_anchor\n        tag: F1_SCORE_macro\n      - key: PRECISION\n        params:\n          average: macro\n        prediction_subscription_key: *postprocessing_argmax_key_anchor\n        target_subscription_key: *target_key_anchor\n        tag: PRECISION_macro\n      - key: RECALL\n        params:\n          average: macro\n        prediction_subscription_key: *postprocessing_argmax_key_anchor\n        target_subscription_key: *target_key_anchor\n        tag: RECALL_macro\n    loss_funs_config:\n      - prediction_subscription_key: *model_prediction_key_anchor\n        target_subscription_key: *target_key_anchor\n        key: CrossEntropyLoss\n        tag: cross_entropy_loss\n    show_progress: false\n\nevaluator:\n  component_type_key: EVALUATOR\n  variant_key: DEFAULT\n  requirements:\n    - name: eval_component\n      component_name: eval_component\n\nearly_stopping_strategy_registry:\n  component_type_key: EARLY_STOPPING_STRATEGY_REGISTRY\n  variant_key: DEFAULT\n\nearly_stopping_strategy:\n  component_type_key: EARLY_STOPPING_STRATEGY\n  variant_key: DEFAULT\n  requirements:\n    - name: early_stopping_strategy_registry\n      component_name: early_stopping_strategy_registry\n  config:\n    early_stopping_key: LAST_K_EPOCHS_IMPROVEMENT_STRATEGY\n    early_stopping_config:\n      min_relative_improvement: 0.00001\n      epochs_window: 5\n      split_name: val\n      monitoring_key: \"F1_SCORE_macro\"\n      is_increase_task: true\n\ncheckpointing_strategy_registry:\n  component_type_key: CHECKPOINTING_STRATEGY_REGISTRY\n  variant_key: DEFAULT\n\ncheckpointing_strategy:\n  component_type_key: CHECKPOINTING_STRATEGY\n  variant_key: DEFAULT\n  requirements:\n    - name: checkpointing_strategy_registry\n      component_name: checkpointing_strategy_registry\n  config:\n    checkpointing_key: SAVE_LAST_EPOCH_ONLY_CHECKPOINTING_STRATEGY\n"
}